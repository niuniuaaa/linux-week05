# 自动化软件测试基础

## 生命周期

**预测型生命周期**：预测型，就是瀑布式模型，适用于在早期能够确定范围、时间和成本的项目

**迭代型生命周期**：适用于需要通过一系列重复的循环的活动来渐进地增加产品的质量的项目

**适应型生命周期**：对项目的前途和范围并不十分明确，将项目划分为若干个短小的迭代周期，在每个周期都产出可验证的交付物，以此去获取用户反馈，从而最终产出用户需要的结果

## 测试

**测试工程师**的本质意义在于：保护用户和业务的利益，使用户不受糟糕的设计、令人困惑的用户体验、功能 BUG、安全和隐私等问题的困扰

**测试的意义**：由于适应敏捷快速迭代的要求，传统“点点点”的测试需求已经越来越少了，“快速回归、自动测试、即时响应、迅速定位” 是当下测试人的十六字方针

**自动化测试**：通过代码的手段，把部分手动劳动转化为机器操作的方式。

**自动化测试的期望**

自动化测试要覆盖100%功能测试，后续不需要再招聘功能测试人员。

自动化测试要稳定，不需要太大的维护，他希望未来测试团队只有两到三

名自动化人员。

运行的结果可以自动报BUG，不需要人工介入。

**自动化测试的意义**：自动化测试应用到项目中去，在保证质量的前提下，让项目的测试成本低于纯手工测试

## 接口测试

**接口**：是一些预先定义的函数，目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需理解内部工作机制的细节

**常见接口类型**：HTTP接口、RPC 、SOAP 、Web Service 、REST API

**接口测试**：主要用于检测外部系统与系统之间以及内部各个子系统之间的交互点。测试的重点是要检查数据的交换、传递和控制管理过程，以及系统间的相互逻辑依赖关系等

**接口测试的好处**：及早发现问题、降低测试成本、接口一般较UI相对稳定，利于进行自动化、接口是各种系统功能的基础

**接口测试的必备的基础知识**

1.**HTTP协议特点**

1.1支持客户/服务器模式：客户/服务器模式工作的方式是由客户端向服务器发出请求，服务器端响应请求，并进行相应服务

1.2简单快速：客户向服务器请求服务时，只需传送请求方法和路径

1.3灵活：HTTP允许传输任意类型的数据对象

1.4无连接：无连接的含义是限制每次连接只处理一个请求，服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

1.5无状态：HTTP协议是无状态协议，无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。

2.**HTTP请求方法剖析**

常用方法① GET ② POST ③ PUT ④ HEAD ⑤ DELETE ⑥ OPTIONS ⑦ TRACE ⑧ CONNECT 

2.1GET 获取资源：GET 方法用来请求访问已被 URI 识别的资源。指定的资源经服务器端解析后返回响应内容

2.2POST ：POST 方法与GET功能类似，一般用来传输实体的主体，POST方法的主要目的不是获取响应主体的内容

2.3PUT：从客户端向服务器传送的数据取代指定的文档的内容，PUT 方法与POST方法最大的不同是：PUT是幂等的，而POST是不幂等的。因此，我们更多时候将PUT方法用作传输资源

2.4HEAD：类似于 GET 请求，只不过返回的响应中没有具体的内容，用于获取报头

2.5DELETE：请求服务器删除指定的资源

2.6OPTIONS：用来查询针对请求 URI 指定的资源支持的方法

2.7TRACE：回显服务器收到的请求，主要用于测试或诊断。

2.8CONNECT：开启一个客户端与所请求资源之间的双向沟通的通道。它可以用来创建隧道

3.**状态码**：是用以表示网页服务器超文本传输协议响应状态的3位数字代码

3.1 200 ：请求已成功，请求所希望的响应头或数据体将随此响应返回

3.2 202 ：已接受。已经接受请求，但未处理完成

3.3 206 ：部分内容。服务器成功处理了部分GET请求

3.4 301 ：永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替

3.5 302 ：临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI

3.6 400 ：客户端请求的语法错误，服务器无法理解

3.7 401 ：请求要求用户的身份认证

3.8 403 ：服务器理解请求客户端的请求，但是拒绝执行此请求

3.9 404 Not Found：服务器无法根据客户端的请求找到资源（网页）

3.10 500 Internal Server Error ：服务器内部错误，无法完成请求

3.11 502 Bad Gateway：充当网关或代理的服务器，从远端服务器接收到了一个无效的请求

## web自动化

**Web自动化**：WEB自动化测试就是把在网页上的人工测试操作转化成用机器、软件、程序来测试产品的过程

**Web自动化目的**：面向用户的“自动化” ，弥补单元测试、接口测试的不足，取代部分重复枯燥的操作，测试岗位进阶的趋势

**完美WEB自动化的项目**

1.任务测试明确，不会频繁变动

2.每日构建后的测试验证

3.比较频繁的回归测试

4.软件系统界面稳定，变动少

5.软件维护周期长

6.被测软件系统开发比较规范，能够保证系统的可测试性 

7.测试人员具备较强的编程能力

8.项目进度压力不太大

**WEB自动化面临的问题**：不稳定、难维护

**WEB自动化的改进**：更优秀的框架设计、更合理的维护方式、更稳健的测试环境

**选择Selenium**：开源免费 、使用灵活、简单 、后期用例易于维护 、支持多种语言 、容易与单元测试框架结合 、可支持多浏览器同时，支持远程启动其他服务器 、高度复用性 、 代码可自主掌控，对于搭建框架、平台等有不可替代的优势

## APP自动化

**APP自动化**：用户对App产品的质量和用户体验要求越来越高、互联网公司对移动端产品投入的重视越来越高、互联网产品迭代快、繁琐的回归测试

## 互联网运营

**互联网运维职责**：资源管理 ： 采购、规划、调度；变更部署 ：部署、变更、发布、回退；监控告警；故障响应

**“六大”运维发布策略**：重建部署、滚动部署（增量发布）、蓝绿部署、金丝雀部署、A/B部署、影子部署

**重建部署**

**优点：**便于设置、应用状态完整更新

**缺点：**对用户影响很大，预期的宕机时间取决于下线时间和应用启动耗时

**滚动部署**

**优点：**便于设置、版本在实例间缓慢发布

**缺点：**发布/回滚耗时、无法控制流量蓝绿部署

**蓝绿部署**

**优点：**实时发布、回滚、避免版本冲突问题，整个应用状态统一一次切换

**缺点：**比较昂贵因为需要双倍的资源、在释放版本到生产环境之前，整个平台的主流程测试必须执行

**金丝雀部署**

**优点：**版本面向一部分用户发布、方便错误评估和性能监控、快速回滚

**缺点：**发布缓慢

**A/B部署**

**优点：**多个版本并行运行、完全控制流量分布

**缺点：**需要智能负载均衡，配置算法复杂、资源占用

**影子部署**

**优点：**可以使用生产环境流量进行性能评估、对用户无影响、直到应用的稳定性和性能满足要求后才发布

**缺点：**双倍资源，成本昂贵、不是真实用户测试，可能出现误导 、配置复杂

**发布策略的选择**

1.实际采用哪种方式取决于需求和预算

2.蓝绿、金丝雀、AB和影子部署对预算有更高的要求，因为需要双倍资源 

3.缺乏测试或者对软件的功能和稳定性影响缺乏信心，那么可以使用金丝雀部署或者AB部署或者影子部署